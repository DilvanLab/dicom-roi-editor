<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>dicom-roi-editor Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../dicom-roi-editor.html">
  </head>
  <body>

    <p>An example of <code>&lt;dicom-roi-editor&gt;</code>:</p>

    <p>
    <button id="load-button">Load Images</button>
    <button id="inc-button">--></button>
    <button id="dec-button"><--</button>
    </p>

    <div>
    <canvas id="epad-canvas" width="512" height="512"></canvas>

    <dicom-roi-editor
        canvas = '#epad-canvas'
        pref = '{
          overrideCenter: 0,
          overrideWidth: 0,
          windowOverride: false
          }'
        series = '{
          bitsStored: "12",
          columns: 512,
          numberOfImages: 100,
          pixelRepresentation: "0",
          pixelSpacing: "0.974609375\\0.974609375",
          rescaleIntercept: "-1000",
          rescaleSlope: "1",
          rows: 512,
          sliceThickness: "5.0",
          windowCenter: "00040\\00040",
          windowWidth: "00400\\00400"
          }'
        >
    </dicom-roi-editor>
    </div>

    <script>
        "use strict";
        var counter =0;
        var lstPngs =[
            "1_2_840_113704_1_111_3820_1207241354_1509.png",
            "1_2_840_113704_1_111_3820_1207241355_1510.png",
            "1_2_840_113704_1_111_3820_1207241357_1511.png",
            "1_2_840_113704_1_111_3820_1207241358_1512.png",
            "1_2_840_113704_1_111_3820_1207241359_1513.png",
            "1_2_840_113704_1_111_3820_1207241360_1514.png",
            "1_2_840_113704_1_111_3820_1207241360_1515.png",
            "1_2_840_113704_1_111_3820_1207241361_1516.png",
            "1_2_840_113704_1_111_3820_1207241362_1517.png",
            "1_2_840_113704_1_111_3820_1207241363_1518.png",
            "1_2_840_113704_1_111_3820_1207241364_1519.png",
            "1_2_840_113704_1_111_3820_1207241365_1520.png",
            "1_2_840_113704_1_111_3820_1207241366_1521.png",
            "1_2_840_113704_1_111_3820_1207241367_1522.png",
            "1_2_840_113704_1_111_3820_1207241368_1523.png",
            "1_2_840_113704_1_111_3820_1207241369_1524.png",
            "1_2_840_113704_1_111_3820_1207241370_1525.png",
            "1_2_840_113704_1_111_3820_1207241390_1529.png",
            "1_2_840_113704_1_111_3820_1207241391_1530.png",
            "1_2_840_113704_1_111_3820_1207241392_1531.png",
            "1_2_840_113704_1_111_3820_1207241393_1532.png",
            "1_2_840_113704_1_111_3820_1207241395_1533.png",
            "1_2_840_113704_1_111_3820_1207241396_1534.png",
            "1_2_840_113704_1_111_3820_1207241396_1535.png",
            "1_2_840_113704_1_111_3820_1207241397_1536.png",
            "1_2_840_113704_1_111_3820_1207241398_1537.png",
            "1_2_840_113704_1_111_3820_1207241399_1538.png",
            "1_2_840_113704_1_111_3820_1207241400_1539.png",
            "1_2_840_113704_1_111_3820_1207241401_1540.png",
            "1_2_840_113704_1_111_3820_1207241402_1541.png",
            "1_2_840_113704_1_111_3820_1207241403_1542.png",
            "1_2_840_113704_1_111_3820_1207241404_1543.png",
            "1_2_840_113704_1_111_3820_1207241405_1544.png",
            "1_2_840_113704_1_111_3820_1207241406_1545.png",
            "1_2_840_113704_1_111_3820_1207241407_1546.png",
            "1_2_840_113704_1_111_3820_1207241407_1547.png",
            "1_2_840_113704_1_111_3820_1207241408_1548.png",
            "1_2_840_113704_1_111_3820_1207241410_1549.png",
            "1_2_840_113704_1_111_3820_1207241411_1550.png",
            "1_2_840_113704_1_111_3820_1207241412_1551.png",
            "1_2_840_113704_1_111_3820_1207241413_1552.png",
            "1_2_840_113704_1_111_3820_1207241413_1553.png",
            "1_2_840_113704_1_111_3820_1207241414_1554.png",
            "1_2_840_113704_1_111_3820_1207241415_1555.png",
            "1_2_840_113704_1_111_3820_1207241416_1556.png",
            "1_2_840_113704_1_111_3820_1207241418_1557.png",
            "1_2_840_113704_1_111_3820_1207241419_1558.png",
            "1_2_840_113704_1_111_3820_1207241419_1559.png",
            "1_2_840_113704_1_111_3820_1207241420_1560.png",
            "1_2_840_113704_1_111_3820_1207241421_1561.png",
            "1_2_840_113704_1_111_3820_1207241422_1562.png",
            "1_2_840_113704_1_111_3820_1207241423_1563.png",
            "1_2_840_113704_1_111_3820_1207241424_1564.png",
            "1_2_840_113704_1_111_3820_1207241425_1565.png",
            "1_2_840_113704_1_111_3820_1207241426_1566.png",
            "1_2_840_113704_1_111_3820_1207241427_1567.png",
            "1_2_840_113704_1_111_3820_1207241428_1568.png",
            "1_2_840_113704_1_111_3820_1207241429_1569.png",
            "1_2_840_113704_1_111_3820_1207241430_1570.png",
            "1_2_840_113704_1_111_3820_1207241430_1571.png",
            "1_2_840_113704_1_111_3820_1207241431_1572.png",
            "1_2_840_113704_1_111_3820_1207241432_1573.png",
            "1_2_840_113704_1_111_3820_1207241434_1574.png",
            "1_2_840_113704_1_111_3820_1207241435_1575.png",
            "1_2_840_113704_1_111_3820_1207241436_1576.png",
            "1_2_840_113704_1_111_3820_1207241436_1577.png",
            "1_2_840_113704_1_111_3820_1207241437_1578.png",
            "1_2_840_113704_1_111_3820_1207241438_1579.png",
            "1_2_840_113704_1_111_3820_1207241439_1580.png",
            "1_2_840_113704_1_111_3820_1207241440_1581.png",
            "1_2_840_113704_1_111_3820_1207241442_1582.png",
            "1_2_840_113704_1_111_3820_1207241442_1583.png",
            "1_2_840_113704_1_111_3820_1207241443_1584.png",
            "1_2_840_113704_1_111_3820_1207241444_1585.png",
            "1_2_840_113704_1_111_3820_1207241445_1586.png",
            "1_2_840_113704_1_111_3820_1207241446_1587.png",
            "1_2_840_113704_1_111_3820_1207241447_1588.png",
            "1_2_840_113704_1_111_3820_1207241447_1589.png",
            "1_2_840_113704_1_111_3820_1207241449_1590.png",
            "1_2_840_113704_1_111_3820_1207241450_1591.png",
            "1_2_840_113704_1_111_3820_1207241451_1592.png",
            "1_2_840_113704_1_111_3820_1207241452_1593.png",
            "1_2_840_113704_1_111_3820_1207241453_1594.png",
            "1_2_840_113704_1_111_3820_1207241453_1595.png",
            "1_2_840_113704_1_111_3820_1207241454_1596.png",
            "1_2_840_113704_1_111_3820_1207241455_1597.png",
            "1_2_840_113704_1_111_3820_1207241457_1598.png",
            "1_2_840_113704_1_111_3820_1207241458_1599.png",
            "1_2_840_113704_1_111_3820_1207241459_1600.png",
            "1_2_840_113704_1_111_3820_1207241459_1601.png",
            "1_2_840_113704_1_111_3820_1207241460_1602.png",
            "1_2_840_113704_1_111_3820_1207241461_1603.png",
            "1_2_840_113704_1_111_3820_1207241462_1604.png",
            "1_2_840_113704_1_111_3820_1207241464_1605.png",
            "1_2_840_113704_1_111_3820_1207241465_1606.png",
            "1_2_840_113704_1_111_3820_1207241465_1607.png",
            "1_2_840_113704_1_111_3820_1207241466_1608.png",
            "1_2_840_113704_1_111_3820_1207241467_1609.png",
            "1_2_840_113704_1_111_3820_1207241468_1610.png",
            "1_2_840_113704_1_111_3820_1207241468_1611.png",
            "1_2_840_113704_1_111_3820_1207241442_1582.png"
        ]
//      document.querySelector('button').addEventListener('click', function() {
//        alert(document.querySelector('dicom-roi-editor').sayHello('Hallo!'));
//      });

        document.querySelector('#load-button').addEventListener('click', function() {
            //alert('read image');
            var editor = document.querySelector('dicom-roi-editor').editor;
            // Read png files
//            for (var i = 0; i < 7; i ++) {
//                var url = "1_2_752_24_7_19011385_453825/1_2_840_113704_1_111_424_1207241028_7/filename" + i +".png";
//                editor.loadPngTexture(i, url);
//                //imagesQueued = true;
//            }

            for (var i=0; i<lstPngs.length; i++) {
                var url = "1_2_752_24_7_19011385_453825/1_2_840_113704_1_111_424_1207241028_7/" + lstPngs[i];
//
                editor.loadPngTexture(i, url);
            }

        });
        document.querySelector('#inc-button').addEventListener('click', function() {
            var editor = document.querySelector('dicom-roi-editor').editor;
            //alert('inc');
            editor.activePlane = br.usp.dilvanLab.roi3DEditor.ALL;
            var c = editor.getImageCoord(br.usp.dilvanLab.roi3DEditor.AXIAL);
            c = c + 0.01;
            if (c>1-0.01) c=1-0.01;
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.AXIAL,c );
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.FRONTAL, c );
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.SAGITTAL, c );
            editor.drawImage();
        });
        document.querySelector('#dec-button').addEventListener('click', function() {
            var editor = document.querySelector('dicom-roi-editor').editor;
            //alert('inc');
            //editor.setActivePlane(br.usp.dilvanLab.roi3DEditor.ALL);
            var c = editor.getImageCoord(br.usp.dilvanLab.roi3DEditor.AXIAL);
            c = c - 0.01;
            if (c<0.0) c=0.0;
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.AXIAL,c );
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.FRONTAL, c );
            editor.setActiveImage(br.usp.dilvanLab.roi3DEditor.SAGITTAL, c );
            editor.drawImage();
        });
    </script>

  </body>
</html>
